<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pig4cloud.pig.patient.mapper.PersureHeartRateMapper">

  <resultMap id="persureHeartRateMap" type="com.pig4cloud.pig.patient.entity.PersureHeartRateEntity">
        <id property="sdhId" column="sdh_id"/>
        <id property="systolic" column="systolic"/>
        <id property="diastolic" column="diastolic"/>
        <id property="heartRate" column="heart_rate"/>
        <id property="uploadTime" column="upload_time"/>
        <id property="patientUid" column="patient_uid"/>
        <id property="sdhClassification" column="sdh_classification"/>
  </resultMap>

    <select id="selectTodayMaxBloodPressure" resultType="com.pig4cloud.pig.patient.entity.PersureHeartRateEntity">
        SELECT *
        FROM persure_heart_rate
        WHERE patient_uid = #{patientUid}
          AND DATE(upload_time) = CURDATE()
        ORDER BY systolic DESC
            LIMIT 1
    </select>

    <select id="selectTodayMinHeartRate" resultType="com.pig4cloud.pig.patient.entity.PersureHeartRateEntity">
        SELECT *
        FROM persure_heart_rate
        WHERE patient_uid = #{patientUid}
          AND DATE(upload_time) = CURDATE()
        ORDER BY heart_rate ASC
            LIMIT 1
    </select>
</mapper>